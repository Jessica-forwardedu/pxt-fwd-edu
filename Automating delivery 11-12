# Automating Delivery: Integrating AI with Electric Vehicles
```package
fwd-edu-breakout=github:climate-action-kits/pxt-fwd-edu/fwd-breakout
solar=github:climate-action-kits/pxt-fwd-edu
```
## Step 1 @showdialog
Welcome to Automating Deivery: Integrating AI with Electric Vehichles
![built project](https://climate-action-kits.github.io/pxt-fwd-edu/tutorial-assets/project-electriccar-400.png)

## Step 2 @showdialog
Plug your USB cable into the micro:bit. 
![breakout board](https://climate-action-kits.github.io/pxt-fwd-edu/tutorial-assets/connect-microbit.gif)

## Step 3 @showdialog
Insert it into the Climate Action Kit board. 
![breakout board](https://climate-action-kits.github.io/pxt-fwd-edu/tutorial-assets/breakout-resized.png)

## Step 4 @showhint
Click three dots besides ``|Download|`` button and follow the steps to pair your micro:bit.
![pair gif](https://climate-action-kits.github.io/pxt-fwd-edu/tutorial-assets/pairmicrobit-280x203.gif)

## Step 5 @showhint
Look below the @boardname@ simulator to see the Climate Action Board and the connected sensors. Try to interact with your sensor and the simulator will react to it.
![line](https://mbakhtar.github.io/mvp-6-tutorials-update/updated-assets/simulator-5-Line.gif)

## Step 6
Click ``||fwdMotors:Motors||`` drag and drop ``||fwdMotors:Setup Driving||`` block inside ``||basic:on start||`` loop.

~hint Why did we do this?
  - Assigning specific roles to the left and right motors so it can drive forward and turn properly.
  - We are teaching our robot which wheel is left and which wheel is right 
hint~
```blocks
fwdMotors.setupDriving(
fwdMotors.leftServo,
fwdMotors.leftServo,
)
```
```
## Step 7 
Change the ``||fwdMotors:right motor to rightServo||``. 
Keep the ``||fwdMotors: left motor to leftServo||``.

~hint Why did we do this?
  - We can't have code going to the same servo 
  - This is why we are matching right and left
hint~

```blocks
fwdMotors.setupDriving(
fwdMotors.leftServo,
fwdMotors.rightServo,
)
```

## Step 8
Click ``||logic:Logic||`` drag and drop ``||logic:if true then||`` block inside ``||basic:forever||`` loop.


~hint Why did we do this?
  - Using the If/then block means we are giving the code a choice
  - Placing it in forever means it will never stop happening
hint~


```blocks
fwdMotors.setupDriving(
fwdMotors.leftServo,
fwdMotors.rightServo,
)
basic.forever(function () {
    if (true) {
            }
    })
    ```

## Step 9
Click ``||Variables:Variables||``. Click on |Make a Variable| to create a new ``||Variables:Variable||``.  
Name it ``||Variables:IsDrivingEnabled||``.


```blocks
fwdMotors.setupDriving(
fwdMotors.leftServo,
fwdMotors.rightServo,
)
basic.forever(function () {
    if (true) {
            }
    })
```

## Step 10
Click ``||Variables:Variables||`` drag and drop ``||Variables:IsDrivingEnabled||`` block
block to replace ``||logic:true||`` condition of ``||logic:if true then||`` block inside ``||basic:forever||`` loop.


```blocks
fwdMotors.setupDriving(
fwdMotors.leftServo,
fwdMotors.rightServo,
)
basic.forever(function () {
    if (IsDrivingEnabled) {
            }
    })
 ```


## Step 11 
Click ``||Input:Input||`` drag and drop ``||Input:on button A pressed||`` block
on workspace. 
```blocks 
input.onButtonPressed(Button.A, function () {
	
})

fwdMotors.setupDriving(
fwdMotors.leftServo,
fwdMotors.rightServo,
)
basic.forever(function () {
    if (IsDrivingEnabled) {
            }
    })
```


##Step 12 
Right click ``||Input:on button A pressed||`` block and duplicate it.
Change ``||Input:A||`` to ``||Input:B||``.

```blocks 
input.onButtonPressed(Button.A, function () {
	
})
input.onButtonPressed(Button.B, function () {
	
})
fwdMotors.setupDriving(
fwdMotors.leftServo,
fwdMotors.rightServo,
)
basic.forever(function () {
    if (IsDrivingEnabled) {
            }
    })
```

## Step 13 
Click ``||Variables:Variables||`` drag and drop ``||Variables:IsDrivingEnabled = 0||`` within  ``||Input:on button A pressed||``

```blocks
input.onButtonPressed(Button.A, function () {
    IsDrivingEnabled = 0
})
input.onButtonPressed(Button.B, function () {
	
})
let IsDrivingEnabled = 0
fwdMotors.setupDriving(
fwdMotors.leftServo,
fwdMotors.rightServo,
0
)
basic.forever(function () {
    if (IsDrivingEnabled) {
    	
    }
})
```

## Step 14 
Click ``||Logic:Logic||`` drag and drop ``||logic:false|`` to replace 0 in ``||Variables:IsDrivingEnabled = 0||`` within  ``||Input:on button A pressed||``

```blocks
input.onButtonPressed(Button.A, function () {
    IsDrivingEnabled = false
})
input.onButtonPressed(Button.B, function () {
	
})
let IsDrivingEnabled = false
fwdMotors.setupDriving(
fwdMotors.leftServo,
fwdMotors.rightServo,
0
)
basic.forever(function () {
    if (IsDrivingEnabled) {
    	
    }
})
```

## Step 15
Click ``||Logic:Logic||`` drag and drop ``||logic:false|`` to replace 0 in ``||Variables:IsDrivingEnabled = 0||`` within  ``||Input:on button A pressed||``

```blocks
input.onButtonPressed(Button.A, function () {
    IsDrivingEnabled = false
})
input.onButtonPressed(Button.B, function () {
    IsDrivingEnabled = true
})
let IsDrivingEnabled = false
fwdMotors.setupDriving(
fwdMotors.leftServo,
fwdMotors.rightServo,
0
)
basic.forever(function () {
    if (IsDrivingEnabled) {
    	
    }
})
```

## Step 16 

Click ``||fwdMotors:Motors||`` drag and drop ``||fwdMotors:Stop||`` under ``||Variables:IsDrivingEnabled = false||`` within  ``||Input:on button B pressed||``

```blocks 
input.onButtonPressed(Button.A, function () {
    IsDrivingEnabled = false
    fwdMotors.stop()
})
input.onButtonPressed(Button.B, function () {
    IsDrivingEnabled = true
})
let IsDrivingEnabled = false
fwdMotors.setupDriving(
fwdMotors.leftServo,
fwdMotors.rightServo,
0
)
basic.forever(function () {
    if (IsDrivingEnabled) {
    	
    }
})
```
## Step 17 

Click ``||logic:Logic||`` drag and drop ``||logic:if true then else||`` block inside the first ``||logic:if true then||`` block inside ``||basic:forever||`` loop.


~hint What did this do?
  - We are now using the variable we just created
  - Replacing the true condition means the conditional will check for driving instead
hint~

```blocks
input.onButtonPressed(Button.A, function () {
    IsDrivingEnabled = false
    fwdMotors.stop()
})
input.onButtonPressed(Button.B, function () {
    IsDrivingEnabled = true
})


let IsDrivingEnabled = false
fwdMotors.setupDriving(
fwdMotors.leftServo,
fwdMotors.rightServo,
0
)
basic.forever(function () {
    if (IsDrivingEnabled) {
        if (true) {
            
        } else {
            
        }
    }
})
```

## Step 18 
Click ``||fwdSensors:Sensors||`` drag and drop ``||fwdSensors: line1 state is ●||`` to replace ``||logic:true||`` condition of ``||logic:true||`` within the ``||logic:if true then||`` block 


```blocks 
input.onButtonPressed(Button.A, function () {
    IsDrivingEnabled = false
    fwdMotors.stop()
})
input.onButtonPressed(Button.B, function () {
    IsDrivingEnabled = true
})

let IsDrivingEnabled = false
fwdMotors.setupDriving(
fwdMotors.leftServo,
fwdMotors.rightServo,
0
)
basic.forever(function () {
    if (IsDrivingEnabled) {
        if (fwdSensors.sonar1.fwdDistancePastThreshold(0.5, fwdSensors.ThresholdDirection.Under)) {
        	
        } else {
        	
        }
    }
}) 
```

## Step 19
Click ``||music:Music||`` drag and drop ``||Music:music.ringTone||`` block within  ``||logic:if||`` ``||fwdSensors: line1 state is ●||``
``||logic:then||`` condition.


```block
input.onButtonPressed(Button.A, function () {
    IsDrivingEnabled = false
    fwdMotors.stop()
})
input.onButtonPressed(Button.B, function () {
    IsDrivingEnabled = true
})

let IsDrivingEnabled = false
fwdMotors.setupDriving(
fwdMotors.leftServo,
fwdMotors.rightServo,
0
)
basic.forever(function () {
    if (IsDrivingEnabled) {
        if (fwdSensors.sonar1.fwdDistancePastThreshold(0.5, fwdSensors.ThresholdDirection.Under)) {
            music.ringTone(494)
        } else {
        	
        }
    }
})
```

## Step 20
 Click ``||fwdMotors:Motors||`` drag and drop ``||fwdMotors:Drive forward 50%||`` under ``||Music:music.ringTone||`` block within  ``||logic:if||`` ``||fwdSensors: line1 state is ●||``
``||logic:then||`` condition.

input.onButtonPressed(Button.A, function () {
    IsDrivingEnabled = false
    fwdMotors.stop()
})
input.onButtonPressed(Button.B, function () {
    IsDrivingEnabled = true
})
let IsDrivingEnabled = false
fwdMotors.setupDriving(
fwdMotors.leftServo,
fwdMotors.rightServo,
0
)
basic.forever(function () {
    if (IsDrivingEnabled) {
        if (fwdSensors.sonar1.fwdDistancePastThreshold(0.5, fwdSensors.ThresholdDirection.Under)) {
            music.ringTone(494)
            fwdMotors.drive(fwdMotors.DrivingDirection.Reverse, 50)
        } else {
        	
        }
    }
})
```

## Step 20
Click ``||basic:basic||`` drag and drop ``||basic:pause (ms) 100||``
block under ``||fwdMotors:Turn -5 in place||`` block.
```blocks
fwdMotors.setupDriving(
fwdMotors.leftServo,
fwdMotors.rightServo,
)
basic.forever(function () {
    if (fwdSensors.line1.fwdIsLineSensorState(fwdSensors.LineSensorState.Hit)) {
        fwdMotors.turn(5)
        basic.pause(100)
    }
    if (fwdSensors.line2.fwdIsLineSensorState(fwdSensors.LineSensorState.Miss)) {
        fwdMotors.drive(fwdMotors.DrivingDirection.Forward, 20)
        basic.pause(100)
    }
    if (fwdSensors.line3.fwdIsLineSensorState(fwdSensors.LineSensorState.Hit)) {
        fwdMotors.turn(-5)
        basic.pause(100)
    }
})
```
## Step 21
Click ``||fwdMotors:+||`` on ``||fwdMotors:Setup Driving||``
block inside ``||basic:on start||`` block. Set bias to ``||fwdMotors: 0||``.
Change ``||basic:pause (ms) 100||`` to ``||basic:500||`` for all 
``||basic:pause||`` blocks.
```blocks
fwdMotors.setupDriving(
fwdMotors.leftServo,
fwdMotors.rightServo,
0
)
basic.forever(function () {
    if (fwdSensors.line1.fwdIsLineSensorState(fwdSensors.LineSensorState.Hit)) {
        fwdMotors.turn(5)
        basic.pause(500)
    }
    if (fwdSensors.line2.fwdIsLineSensorState(fwdSensors.LineSensorState.Miss)) {
        fwdMotors.drive(fwdMotors.DrivingDirection.Forward, 20)
        basic.pause(500)
    }
    if (fwdSensors.line3.fwdIsLineSensorState(fwdSensors.LineSensorState.Hit)) {
        fwdMotors.turn(-5)
        basic.pause(500)
    }
})
```
## Step 22 @showhint
``|Download|`` and test your code. The simulator shows how it should work.
Congratulations on completing your Automated delivery robot! - Go back to the lesson for more activities and extensions.
![line-servos](https://mbakhtar.github.io/mvp-6-tutorials-update/updated-assets/simulator-16-ev-line.gif)
